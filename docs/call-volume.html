<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Call Volume Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Denver EMS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About</a>
</li>
<li>
  <a href="call-volume.html">Call Volume Analysis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Call Volume Analysis</h1>

</div>


<pre class="r"><code># Total calls in a given year with calculated change in percent from previous year
calls_per_year&lt;- call_data %&gt;%
  filter(Year != 2019) %&gt;% #Filtered out, only partial data
  group_by(Year) %&gt;% 
  summarise(calls = sum(calls)) %&gt;% 
  mutate(perc_change = (calls - lag(calls))/lag(calls))

# Minimum and maximum percentage change
min_max &lt;-calls_per_year %&gt;% 
  filter(perc_change != &#39;NA&#39;)
a &lt;- round(max(min_max$perc_change), 4) * 100
b &lt;- round(min(min_max$perc_change), 4) * 100

# Overall percentage change in calls from 2011 - 2018
x &lt;-calls_per_year %&gt;% 
  filter(Year == &#39;2011&#39; | Year == &#39;2018&#39;) %&gt;% 
  mutate(perc_change = (calls - lag(calls))/lag(calls)) %&gt;% 
  select(perc_change) %&gt;% 
  filter(perc_change != &#39;NA&#39;)
overall &lt;- round(x$perc_change,4) * 100</code></pre>
<p>According to the US Census Bureau the population in the city of Denver has a growth rate of 1.6% per year and the city has grown by just under 20% since 2010. As a natural consequence of this growth there has also been a steady increase in EMS calls. While the year on year percentage change in call volumes has fluctuated from a maximum growth of 10.77% in 2014 to a minimum rate of 0.16% in 2018, every year has seen positive growth and there has been an overall 39.71% increase in calls from 2011 - 2018.</p>
<style type="text/css">
.twoC {width: 100%}
.clearer {clear: both}
.twoC .table {max-width: 25%; float: right}
.twoC img {max-width: 75%; float: left}
</style>
<div class = "twoC">

<pre class="r"><code># Commented out code generated the table, code not otherwise shown

#call_data %&gt;% 
#  group_by(Year) %&gt;% 
#  filter(Year != 2019) %&gt;% 
#  summarise(Calls = sum(calls)) %&gt;% 
#  kable(format = &#39;html&#39;, escape = F) %&gt;% 
#  kable_styling(&#39;striped&#39;, full_width = T) %&gt;% 
#  add_header_above(c(&quot; &quot;, &quot;Total Calls &quot;))

# Plot of percentage change in total calls
calls_per_year %&gt;%
 replace_na(list(perc_change = 0)) %&gt;%  #No percentage change in starting year
 ggplot(aes(x = Year, y = perc_change)) +
  ggtitle(&quot;Percentage Change in Call Volumes&quot;, subtitle = &#39;Year on Year&#39;) + 
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5), plot.subtitle = element_text(hjust = 0.5)) +
  ylab(NULL) +
  geom_col(fill = &#39;light blue&#39;, color = &#39;black&#39;) +
  scale_y_continuous(labels = scales::percent) </code></pre>
<p><img src="call-volume_files/figure-html/perc_plot-1.png" width="672" /></p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Total Calls
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Year
</th>
<th style="text-align:right;">
Calls
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
78262
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
85088
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
87835
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
97293
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
100458
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
106292
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
109164
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
109342
</td>
</tr>
</tbody>
</table>
</div>
<div class="clearer">

</div>
<p>The growth rate in call volumes has slowed in recent years with a negligable increase from 2017 to 2018. Whether or not this will be an ongoing trend remains to be seen. The fact remains there has been an increase in call volume every year since 2011.</p>
<p>This growth in call volume will lead to an increased need for emergency medical personnel and the need to schedule that personnel efficiently to mitigate the needs of the city.</p>
<pre class="r"><code># Creates a table with total calls in a given month for each year (not including partial 2019 data)
month_year &lt;- call_data %&gt;%
  mutate(year = format(Date, &quot;%Y&quot;), month = format(Date, &quot;%m&quot;)) %&gt;% 
  filter(year != &#39;2019&#39;) %&gt;% 
  group_by(year, month) %&gt;% 
  summarise(calls = sum(calls))

# Changing variable types for plotting.  Year as the factor, month as numeric so ggplot knows to connect lines between months
month_year$year &lt;- factor(month_year$year)
month_year$month &lt;- as.numeric(month_year$month)

# Plotting calls by month per year, note year is the factor for coloring the lines
month_year_plot &lt;- month_year %&gt;% 
  ggplot() + 
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5), plot.subtitle = element_text(hjust = 0.5)) +
  geom_line(aes(x = month, y = calls, color = year)) +
  scale_x_continuous(breaks = 1:12, labels = c(
                       &quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, 
                       &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) +
  ggtitle(&quot;Total Calls Per Month&quot;, subtitle = &quot;Years 2011-2018&quot;) +
  xlab(&quot;Month&quot;) +
  ylab(&quot;Total Calls&quot;)
month_year_plot</code></pre>
<p><img src="call-volume_files/figure-html/by-month-year-1.png" width="672" style="display: block; margin: auto;" /> <br> There are clear seasonal trends in call volumes which could lead to difficulty in optimizing personnel. There is a clear need for increased staffing in the spring and summer months with a decrease in call volume in the fall and winter months.</p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
